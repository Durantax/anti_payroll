# 파일 저장 경로 설정 가이드

## 📁 기능 소개

PDF, CSV 파일을 자동으로 저장할 기본 경로를 설정할 수 있습니다.

### ✅ 이전 문제
```
❌ 매번 저장 위치 선택 필요
❌ 명세서 일괄생성 시 10번 클릭!
❌ 이메일 발송 시 저장 창 표시
❌ 폴더 바로가기 버튼 없음
```

### ✅ 해결
```
✅ 한 번만 경로 설정
✅ 이후 모든 파일 자동 저장
✅ 폴더 바로가기 버튼 표시
✅ 작업 시간 대폭 단축
```

---

## 🎯 설정 방법

### 1. 설정 화면 열기

```
앱 실행
  ↓
상단 메뉴바 → ⚙️ 설정 아이콘 클릭
  ↓
"파일 저장 경로" 탭 선택
```

---

### 2. 경로 설정

#### 옵션 1: 폴더 선택 버튼 사용 (권장)
```
1. [폴더 선택] 버튼 클릭
2. Windows 탐색기에서 폴더 선택
   예: C:\Users\사용자\Documents\급여관리프로그램
3. [저장] 버튼 클릭
```

#### 옵션 2: 직접 입력
```
1. 경로 입력란에 직접 입력
   예: C:\Users\사용자\OneDrive\급여관리프로그램
2. [저장] 버튼 클릭
```

---

### 3. 하위 폴더 옵션 설정

#### ✅ 거래처별 하위 폴더 생성 (권장)
```
[✓] 거래처별 하위 폴더 생성

폴더 구조:
급여관리프로그램\
├── 삼성전자\
│   ├── 2025\
│   │   ├── 삼성전자_2025년12월_급여대장.csv
│   │   ├── 삼성전자_2025년12월_급여대장.pdf
│   │   ├── 삼성전자_홍길동_2025년12월_급여명세서.pdf
│   │   └── 삼성전자_김철수_2025년12월_급여명세서.pdf
│   └── 2024\
├── LG전자\
│   └── 2025\
└── 현대자동차\
    └── 2025\

장점:
✅ 거래처별 파일 자동 분류
✅ 연도별 정리
✅ 파일 찾기 쉬움
```

#### ❌ 하위 폴더 미사용
```
[ ] 거래처별 하위 폴더 생성

폴더 구조:
급여관리프로그램\
├── 삼성전자_2025년12월_급여대장.csv
├── 삼성전자_홍길동_2025년12월_급여명세서.pdf
├── LG전자_2025년12월_급여대장.csv
├── LG전자_김철수_2025년12월_급여명세서.pdf
└── ... (모든 파일이 한 폴더에)

단점:
⚠️ 파일이 많으면 찾기 어려움
⚠️ 자동 분류 안 됨
```

---

## 💡 경로 추천

### 로컬 저장 (기본)
```
C:\Users\사용자명\Documents\급여관리프로그램

장점:
✅ 빠른 속도
✅ 인터넷 불필요
✅ 안정적

단점:
❌ 다른 컴퓨터에서 접근 불가
❌ 백업 필요
```

### OneDrive 개인 (권장)
```
C:\Users\사용자명\OneDrive\급여관리프로그램

장점:
✅ 자동 클라우드 백업
✅ 여러 컴퓨터에서 접근
✅ 모바일에서도 확인

주의:
⚠️ 동시 작업 금지 (충돌 위험)
⚠️ 인터넷 필요
⚠️ 용량 제한 (기본 5GB)
```

### OneDrive 비즈니스
```
C:\Users\사용자명\OneDrive - 회사명\급여관리프로그램

장점:
✅ 큰 용량 (보통 1TB)
✅ 회사 계정 관리
✅ 권한 관리 가능

주의:
⚠️ 회사 정책 확인 필요
⚠️ 동기화 정책 확인
```

---

## 🎨 설정 화면 구성

### 파일 저장 경로 탭

```
┌─────────────────────────────────────────────────┐
│  파일 저장 경로 설정                             │
│  PDF, CSV 파일을 자동으로 저장할 기본 경로     │
├─────────────────────────────────────────────────┤
│                                                  │
│  기본 저장 경로                                  │
│  ┌──────────────────────────────┐  [폴더 선택]  │
│  │ C:\...\급여관리프로그램        │               │
│  └──────────────────────────────┘               │
│                                                  │
│  ┌─────────────────────────────────────────┐    │
│  │ [✓] 거래처별 하위 폴더 생성             │    │
│  │     예: 급여관리프로그램\삼성전자\2025\ │    │
│  └─────────────────────────────────────────┘    │
│                                                  │
│  ┌───────────────────────────────────────┐      │
│  │ ℹ️ 파일 저장 구조                     │      │
│  │                                        │      │
│  │ ✅ 거래처 하위 폴더 사용 시:          │      │
│  │ 급여관리프로그램\거래처명\연도\파일명  │      │
│  │                                        │      │
│  │ 예시:                                  │      │
│  │ ...급여관리프로그램\삼성전자\2025\    │      │
│  │   ├─ 삼성전자_2025년12월_급여대장.csv │      │
│  │   ├─ 삼성전자_2025년12월_급여대장.pdf │      │
│  │   └─ 삼성전자_홍길동_..._급여명세서.pdf│     │
│  └───────────────────────────────────────┘      │
│                                                  │
│  ┌───────────────────────────────────────┐      │
│  │ ☁️ OneDrive 공유 폴더 사용 가능       │      │
│  │                                        │      │
│  │ ✅ OneDrive 폴더를 경로로 설정하면     │      │
│  │    자동 동기화됩니다                   │      │
│  │ ✅ 여러 컴퓨터에서 동일한 파일 접근    │      │
│  │                                        │      │
│  │ 예: C:\...\OneDrive\급여관리프로그램   │      │
│  │                                        │      │
│  │ ⚠️ 주의: 동시 작업 시 충돌 가능       │      │
│  │ (한 번에 한 컴퓨터만 사용)            │      │
│  └───────────────────────────────────────┘      │
│                                                  │
│          [닫기]  [기본값으로]  [저장]           │
└─────────────────────────────────────────────────┘
```

---

## 🚀 사용 효과

### Before (설정 전)
```
[명세서 일괄생성] 클릭
  ↓
PDF 저장 위치 선택 창 1 → 저장
  ↓
PDF 저장 위치 선택 창 2 → 저장
  ↓
... (10번 반복!)
  ↓
완료 (2분 30초 소요)
```

### After (설정 후)
```
[명세서 일괄생성] 클릭
  ↓
자동 저장: 급여관리프로그램\삼성전자\2025\
  - 홍길동_급여명세서.pdf (1/10)
  - 김철수_급여명세서.pdf (2/10)
  - ...
  ↓
완료 (50초 소요)
  ↓
[폴더 열기] 버튼 클릭 → 탐색기 자동 열림!
```

### 시간 절약
```
개별 발송 (1명): 15초 → 5초 (-66%)
일괄 발송 (10명): 150초 → 50초 (-66%)
저장 위치 선택: 10번 → 0번 (-100%)
```

---

## 📊 작동 확인

### 1. 설정 완료 후
```
✅ "파일 저장 경로가 설정되었습니다" 메시지 표시
✅ 설정 창 자동 닫힘
```

### 2. 폴더 바로가기 버튼 표시
```
급여 계산 결과 영역에서:

[급여대장 CSV] [급여대장 PDF] [명세서 일괄생성] [일괄발송] 🟢[폴더 열기]
                                                        ↑
                                                    자동 표시!
```

### 3. 자동 저장 테스트
```
1. 거래처 선택: "삼성전자"
2. 직원 1명 데이터 입력 및 마감
3. 테이블에서 📄 PDF 생성 버튼 클릭
   → 저장 위치 선택 창 없이 자동 저장!
4. [폴더 열기] 버튼 클릭
   → 탐색기 열림: 급여관리프로그램\삼성전자\2025\
5. PDF 파일 확인!
```

---

## ⚠️ 문제 해결

### 문제 1: 폴더 바로가기 버튼이 안 보임
```
원인: 경로가 설정되지 않음

해결:
1. ⚙️ 설정 아이콘 클릭
2. "파일 저장 경로" 탭 선택
3. 경로 입력 및 저장
4. 앱 재시작 (또는 거래처 재선택)
```

### 문제 2: 저장 실패
```
원인: 폴더 권한 문제

해결:
1. Windows 탐색기로 해당 폴더 접근
2. 폴더 우클릭 → 속성 → 보안
3. 사용자 계정 쓰기 권한 확인
```

### 문제 3: OneDrive 동기화 안 됨
```
원인: OneDrive 일시 중지 상태

해결:
1. 작업 표시줄 OneDrive 아이콘 확인
2. ⏸️ 회색 X → 동기화 안 됨
3. OneDrive 우클릭 → "동기화 다시 시작"
```

### 문제 4: 경로가 너무 김
```
원인: Windows 경로 길이 제한 (260자)

해결:
1. 짧은 경로 사용
   예: C:\급여\
2. 또는 레지스트리 수정 (고급 사용자)
```

---

## 🔄 경로 변경

### 다른 경로로 변경하기
```
1. ⚙️ 설정 → "파일 저장 경로" 탭
2. 새 경로 입력 또는 [폴더 선택]
3. [저장] 클릭
4. 기존 파일은 유지됨 (수동 이동 필요)
```

### 기본값으로 복원
```
1. ⚙️ 설정 → "파일 저장 경로" 탭
2. [기본값으로] 버튼 클릭
3. [저장] 클릭

복원 경로:
C:\Users\사용자명\Documents\급여관리프로그램
```

---

## 💾 백업 권장사항

### 로컬 저장 시
```
정기 백업 필요:
- 매월 1회: 외장 하드
- 매주 1회: USB 메모리
- 매일: OneDrive 동기화 (선택)
```

### OneDrive 사용 시
```
자동 백업:
- OneDrive 클라우드 자동 백업
- 30일 버전 관리

추가 권장:
- 중요 파일: 별도 외장 하드 백업
```

---

## 📚 관련 기능

### 1. 폴더 바로가기 버튼
- 경로 설정 시 자동 표시
- 원클릭으로 탐색기 열기
- 거래처 폴더로 자동 이동

### 2. 자동 파일 저장
- 명세서 일괄생성
- 개별 PDF 생성
- 이메일 발송 시 PDF 자동 저장
- CSV 급여대장 내보내기

### 3. 폴더 구조 자동 생성
- 거래처 폴더 자동 생성
- 연도 폴더 자동 생성
- 파일명 자동 생성

---

## 🎯 최종 체크리스트

설정 완료 확인:

- [ ] ⚙️ 설정 → "파일 저장 경로" 탭 접근
- [ ] 경로 입력 (또는 폴더 선택)
- [ ] 거래처 하위 폴더 옵션 선택
- [ ] [저장] 버튼 클릭
- [ ] "파일 저장 경로가 설정되었습니다" 메시지 확인
- [ ] 🟢 [폴더 열기] 버튼 표시 확인
- [ ] 테스트 PDF 생성 (자동 저장 확인)
- [ ] [폴더 열기] 버튼으로 파일 확인

---

**모든 설정 완료! 이제 파일이 자동으로 저장됩니다! ✅**

---

## 🚀 Git 정보

**Commit**: `13db446`  
**Branch**: `genspark_ai_developer`  
**Pull Request**: https://github.com/Durantax/payroll/pull/1

### 적용 방법
```bash
cd C:\coding\payroll
git pull
flutter clean
flutter pub get
flutter run
```

---

**작성일**: 2025-12-22  
**버전**: v1.0
