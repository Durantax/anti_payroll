# 🔴 월급제 0원 문제 - "5인 이상 사업장" 설정 확인

## ❌ 문제 상황
- 월급: 2,000,000원 입력됨 ✅
- 연장/야간/휴일 시간 입력됨 ✅
- 결과: 0원 또는 기본급만 나옴 ❌

## 🔍 원인: "5인 이상 사업장" 설정 누락!

### 근로기준법상 규정
```
📌 연장·야간·휴일 수당은 "5인 이상 사업장"만 지급 의무!
   - 5인 미만: 연장/야간/휴일 수당 없음 (기본급만)
   - 5인 이상: 연장/야간/휴일 수당 지급 (1.5배/0.5배)
```

### PayrollCalculator 코드
```dart
// 연장수당 (5인 이상 사업장만)
if (has5OrMoreWorkers && monthly.overtimeHours > 0) {
    overtimePay = (hourlyRate * monthly.overtimeHours * 1.5).round();
}

// 야간수당 (5인 이상 사업장만)
if (has5OrMoreWorkers && monthly.nightHours > 0) {
    nightPay = (hourlyRate * monthly.nightHours * 0.5).round();
}

// 휴일수당 (5인 이상 사업장만)
if (has5OrMoreWorkers && monthly.holidayHours > 0) {
    holidayPay = ...;
}
```

**`has5OrMoreWorkers = false`이면 모든 수당이 0원!**

---

## ✅ 해결 방법

### 1단계: 거래처 설정 확인

```
📱 Flutter 앱에서:

1. 좌측 메뉴 → "거래처 관리" (또는 설정)
2. 해당 거래처 선택
3. "5인 이상 사업장" 체크박스 확인
4. ✅ 체크되어 있어야 함!
5. 저장
```

### 2단계: 다시 급여 계산

```
1. 직원 목록
2. 해당 직원 선택
3. "급여" 탭
4. 급여 계산 실행
5. 결과 확인
```

---

## 📊 예상 결과

### "5인 이상 사업장" ❌ (체크 안 함)
```
✅ 기본급: 2,000,000원
❌ 연장수당: 0원 (계산 안 됨)
❌ 야간수당: 0원 (계산 안 됨)
❌ 휴일수당: 0원 (계산 안 됨)
───────────────────────
💵 지급총액: 2,000,000원
```

### "5인 이상 사업장" ✅ (체크함)
```
✅ 기본급: 2,000,000원
✅ 연장수당: 246,592원 (32,879원 × 5h × 1.5)
✅ 야간수당: 82,198원 (32,879원 × 5h × 0.5)
✅ 휴일수당: 246,592원 (32,879원 × 5h × 1.5)
───────────────────────
💵 지급총액: 2,575,382원
```

---

## 🎯 체크리스트

**0원 문제 해결 체크:**

☐ 1. 월급여 입력됨? (예: 2,000,000원) ✅
☐ 2. 급여 유형 "월급제" 선택? ✅
☐ 3. 주소정근로시간 입력됨? (예: 14시간) ✅
☐ 4. **거래처 "5인 이상 사업장" 체크됨?** ← 이것 확인!
☐ 5. 연장/야간/휴일 시간 입력됨? ✅

---

## 💡 추가 정보

### "5인 이상 사업장" 판단 기준
```
📌 상시 근로자 5명 이상인 경우:
   - 정규직, 계약직, 파트타임 모두 포함
   - 일용직은 제외
   - 매월 말일 기준 평균 인원으로 판단
```

### 프리랜서는?
```
프리랜서는 근로자가 아니므로:
- 5인 계산에 포함 안 됨
- 연장/야간/휴일 수당 없음
- 3.3% 소득세만 원천징수
```

---

## 🔗 관련 파일

- `lib/services/payroll_calculator.dart` (급여 계산 로직)
- `lib/core/models.dart` (ClientModel.has5OrMoreWorkers)
- `근로기준법 제11조` (적용 범위)

---

## 📞 여전히 0원이 나온다면?

다음을 확인하세요:

1. **거래처 설정 저장 확인**
   - "5인 이상 사업장" 체크 후 저장했는지 확인
   - 앱 재시작 후 다시 확인

2. **서버 데이터 확인**
   - 서버 DB에서 `Clients` 테이블의 `Has5OrMoreWorkers` 값 확인
   - `true` 또는 `1`이어야 함

3. **캐시 문제**
   - 앱 완전 종료 후 재시작
   - 거래처 정보 다시 불러오기

4. **디버그 로그 확인**
   - 콘솔에서 `has5OrMoreWorkers` 값 확인
   - PayrollCalculator 실행 시 로그 확인

